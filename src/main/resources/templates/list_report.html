<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
  <head th:replace="fragments/head" :: head></head>
  <body class="bg-gray-200">
    <nav th:replace="/fragments/nav" : nav></nav>

    <main>
      <div class="flex justify-around items-center mb-10 gap-10">
        <form th:action="@{/report/search}" method="GET">
          <input
            class="border-2 p-2"
            type="text"
            placeholder="Ingrese N° de Denuncia"
            name="reportNumber"
          />
          <input
            class="text-white font-bold p-2 bg-blue-700 rounded cursor-pointer capitalize hover:bg-purple-500"
            type="submit"
            value="buscar"
          />
          <div th:if="${error} != null">
            <p class="absolute text-red-500 text-lg" th:text="${error}"></p>
          </div>
        </form>

        <div>
          <h1
            class="text-5xl text-center text-blue-700 font-black uppercase mt-6 pb-7"
          >
            denuncias
          </h1>
        </div>

        <div>
          <a
            th:href="@{/report/register}"
            class="text-center p-2 bg-blue-700 rounded text-white font-bold capitalize hover:bg-purple-500"
            >agregar denuncia</a
          >
        </div>
      </div>

      <p
        class="mx-20 text-end text-md mb-2 font-black uppercase"
        th:if="${reportList != null and !#lists.isEmpty(reportList)}"
      >
        cantidad
        <span th:text="${#lists.size(reportList)}" class="font-black"></span>
      </p>

      <table class="mx-16 w-11/12 text-center uppercase">
        <thead class="bg-blue-200 text-lg">
          <tr>
            <th scope="col">número denuncia</th>
            <th scope="col">gde</th>
            <th scope="col">fecha</th>
            <th scope="col">localidad</th>
            <th scope="col">direccion</th>
            <th scope="col">diligenciado a</th>
            <th scope="col">operador</th>
            <th scope="col">extension</th>
            <th scope="col">acciones</th>
          </tr>
        </thead>
        <tbody th:if="${reportList} != null" th:each="report : ${reportList}">
          <tr th:if="${report.isVisible} == true" class="h-10 font-bold">
            <td scope="row" th:text="${report.reportNumber}"></td>
            <td scope="row" th:text="${report.gdeNumber}"></td>
            <td scope="row" th:text="${report.date}"></td>
            <td scope="row" th:text="${report.location}"></td>
            <td scope="row" th:text="${report.address}"></td>
            <td scope="row" th:text="${report.dependency}"></td>
            <td scope="row" th:text="${report.users.operatorNumber}"></td>
            <td scope="row" th:if="${report.isExtension == true}">
              <p class="p-1 bg-green-400 text-white font-black rounded-full w-2/3 mx-auto">✓</p>
            </td>
            <td scope="row" th:if="${report.isExtension == false}">
              <p class="p-1 bg-red-400 text-white font-black rounded-full w-2/3 mx-auto">X</p>
            </td>
            <td scope="row" class="capitalize">
              <a
                th:href="@{/report/view/__${report.id}__}"
                class="px-3 py-1 font-bold bg-blue-700 rounded text-white hover:bg-violet-500"
                >ver</a
              >
              <a
                th:href="@{/report/edit/__${report.id}__}"
                class="px-3 py-1 font-bold bg-green-700 rounded text-white hover:bg-violet-500"
                >editar</a
              >
              <a
                th:href="@{/report/delete/__${report.id}__}"
                th:if="${session.currentUser.rol.toString()} == 'ADMIN'"
                class="px-3 py-1 font-bold bg-red-700 rounded text-white hover:bg-violet-500"
                >eliminar</a
              >
            </td>
          </tr>
        </tbody>
      </table>

      <p th:if="${reportList} == null">
        <span class="flex justify-center text-2xl font-black uppercase mt-20"
          >no se encontraron resultados</span
        >
      </p>
    </main>
  </body>
</html>
